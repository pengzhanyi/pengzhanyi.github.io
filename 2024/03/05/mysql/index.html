<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>mysql | Blog | kaori</title><meta name="author" content="zhanyi peng"><meta name="copyright" content="zhanyi peng"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="数据库入门看黑马的数据库了数据库 安装和配置Mysql安装+IDEA配置Mysql数据库_idea怎么安装mysql  安装 mysql  要在管理员权限的命令行下操作   mysql启动  net start mysql  和 net stop mysql 分别开启和关闭mysql服务 启动进入mysql ，mysql -u root -p    (-u + 用户名 ， root 表示是管理员用">
<meta property="og:type" content="article">
<meta property="og:title" content="mysql">
<meta property="og:url" content="https://pengzhanyi.github.io/2024/03/05/mysql/index.html">
<meta property="og:site_name" content="Blog | kaori">
<meta property="og:description" content="数据库入门看黑马的数据库了数据库 安装和配置Mysql安装+IDEA配置Mysql数据库_idea怎么安装mysql  安装 mysql  要在管理员权限的命令行下操作   mysql启动  net start mysql  和 net stop mysql 分别开启和关闭mysql服务 启动进入mysql ，mysql -u root -p    (-u + 用户名 ， root 表示是管理员用">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pengzhanyi.github.io/img/head_sculpture.jpg">
<meta property="article:published_time" content="2024-03-04T17:11:07.000Z">
<meta property="article:modified_time" content="2024-05-06T16:12:42.893Z">
<meta property="article:author" content="zhanyi peng">
<meta property="article:tag" content="blog , learing">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pengzhanyi.github.io/img/head_sculpture.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://pengzhanyi.github.io/2024/03/05/mysql/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'mysql',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-05-07 00:12:42'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Blog | kaori" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/head_sculpture.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">17</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Blog | kaori"><span class="site-name">Blog | kaori</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">mysql</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-03-04T17:11:07.000Z" title="发表于 2024-03-05 01:11:07">2024-03-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-06T16:12:42.893Z" title="更新于 2024-05-07 00:12:42">2024-05-07</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="mysql"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><p>看黑马的数据库了<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Kr4y1i7ru/?p=11&spm_id_from=333.1007.top_right_bar_window_history.content.click">数据库</a></p>
<h3 id="安装和配置"><a href="#安装和配置" class="headerlink" title="安装和配置"></a>安装和配置</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/chigenb/article/details/109259464">Mysql安装+IDEA配置Mysql数据库_idea怎么安装mysql</a></p>
<ul>
<li><p>安装 mysql</p>
<ul>
<li>要在管理员权限的命令行下操作</li>
</ul>
</li>
<li><p>mysql启动</p>
<ul>
<li>net start mysql  和 net stop mysql 分别开启和关闭mysql服务</li>
<li>启动进入mysql ，mysql -u root -p    (-u + 用户名 ， root 表示是管理员用户 ， -p 表示密码)</li>
<li>mysql密码直接设置为 root 了~，</li>
<li>mysql程序在3306端口监听</li>
<li>初始化数据库：mysqld –initialize-insecure –user&#x3D;mysql ，初始化结束后会在mysql目录下生成 data文件夹，用来保存数据库中的 数据</li>
<li>quit 退出 mysql</li>
</ul>
</li>
<li><p>mysq客户端l连接</p>
<ul>
<li>连接到MySQL服务指令： mysql -h 主机IP -P 端口 -u 用户名 -p密码</li>
<li>mysql -h 127.0.0.1 -P 3306 -u root -proot</li>
<li>如果没有写 -h 主机IP，默认就是本机</li>
<li>如果没有写 -p 端口 ，默认是3306</li>
</ul>
</li>
<li><p>图形化工具 navicate</p>
<ul>
<li>用户名密码都设置成了mysql</li>
<li>测试在navicate中创建数据库并新建表</li>
<li>比在命令行中用指令操作数据库简单很多</li>
<li>但还是要学习SQL语句，这样能在java程序中操作数据库</li>
<li>没啥必要，还不如IDEA自带的好用</li>
</ul>
</li>
</ul>
<h3 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h3><ul>
<li><p>数据库</p>
<ul>
<li><p>所谓安装MySQL数据库，就是在主机安装一个数据库管理系统（DBMS，Database manage system），这个管理程序可以管理多个数据库。</p>
</li>
<li><p>一个数据库中可以创建多个表，以保存数据，也有许多其他类型的数据如视图，函数，事件等，但表是最重要的</p>
</li>
<li><p>MySQL数据库<strong>普通表的本质仍然是文件</strong></p>
</li>
<li><p>数据库在3306端口监听，mysqld.exe，客户端通过与3306端口建立连接与数据库取得联系</p>
</li>
<li><p><u>mysqld.exe 是与 MySQL 数据库管理工具关联的进程。该进程负责运行MySQL服务器，该服务器允许客户端连接到数据库，执行查询并执行各种数据库操作。</u></p>
</li>
<li><p>数据库中实际数据保存在 文件夹  mysql-5.7.44-winx64\data 中</p>
</li>
<li><p>数据库管理系统，数据库和表的关系如图所示：![img](C:&#x2F;Program Files (x86)&#x2F;blog&#x2F;source&#x2F;images&#x2F;java_base5&#x2F;11.png)</p>
</li>
</ul>
</li>
<li><p>数据库中的表</p>
<ul>
<li>数据在数据库中往往用表的形式储存</li>
<li>表的一行称为一条记录</li>
<li>在java程序中，一行记录往往使用对象表示</li>
</ul>
</li>
<li><p>为了在 java程序中 操作Mysql，要学习相关SQL语句</p>
</li>
</ul>
<h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h2><h3 id="SQL通用语法"><a href="#SQL通用语法" class="headerlink" title="SQL通用语法"></a>SQL通用语法</h3><ul>
<li><p>SQL语句可以单行或多行书写，<u>以分号结尾</u></p>
</li>
<li><p>SQL语句可以使用空格缩进来增强语句的可读性</p>
</li>
<li><p><strong>Mysql数据库的SQL语句不区分大小写</strong>，关键字建议使用大写</p>
</li>
<li><p>注释：</p>
<ul>
<li>单行： – 注释内容或  #注释内容（Mysql特有）</li>
<li>多行：&#x2F;*  注释内容 *&#x2F;</li>
</ul>
</li>
<li><p>SQL语句分类</p>
<ul>
<li><p>DDL：数据定义语句[create 表，库…]，用于定义数据库对象</p>
</li>
<li><p>DML：数据操作语句[增加insert,修改update，删除delete]，用于对数据库表中的数据进行增删改</p>
</li>
<li><p>DQL：数据查询语句[select]，用于查询数据库中表的记录</p>
</li>
<li><p>DCL：数据控制语句[管理数据库，比如用户权限 grand revoke] ，用来创建数据库用户，控制数据库的访问权限</p>
</li>
</ul>
</li>
<li><p>Mysql中数据类型有很多，主要分为三类：数值类型，字符串类型，日期时间类型。</p>
<p>  <a target="_blank" rel="noopener" href="https://www.runoob.com/mysql/mysql-data-types.html">MySQL 数据类型 </a></p>
<ul>
<li>数值类型</li>
</ul>
<p>  MySQL 支持所有标准 SQL 数值数据类型。</p>
<p>  这些类型包括严格数值数据类型(INTEGER、SMALLINT、DECIMAL 和 NUMERIC)，以及近似数值数据类型(FLOAT、REAL 和 DOUBLE PRECISION)。</p>
<p>  关键字INT是INTEGER的同义词，关键字DEC是DECIMAL的同义词。</p>
<p>  BIT数据类型保存位字段值，并且支持 MyISAM、MEMORY、InnoDB 和 BDB表。</p>
<p>  作为 SQL 标准的扩展，MySQL 也支持整数类型 TINYINT、MEDIUMINT 和 BIGINT。下面的表显示了需要的每个整数类型的存储和范围。</p>
<table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">大小</th>
<th align="left">范围（有符号）</th>
<th align="left">范围（无符号）</th>
<th align="left">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="left">TINYINT</td>
<td align="left">1 Bytes</td>
<td align="left">(-128，127)</td>
<td align="left">(0，255)</td>
<td align="left">小整数值</td>
</tr>
<tr>
<td align="left">SMALLINT</td>
<td align="left">2 Bytes</td>
<td align="left">(-32 768，32 767)</td>
<td align="left">(0，65 535)</td>
<td align="left">大整数值</td>
</tr>
<tr>
<td align="left">MEDIUMINT</td>
<td align="left">3 Bytes</td>
<td align="left">(-8 388 608，8 388 607)</td>
<td align="left">(0，16 777 215)</td>
<td align="left">大整数值</td>
</tr>
<tr>
<td align="left">INT或INTEGER</td>
<td align="left">4 Bytes</td>
<td align="left">(-2 147 483 648，2 147 483 647)</td>
<td align="left">(0，4 294 967 295)</td>
<td align="left">大整数值</td>
</tr>
<tr>
<td align="left">BIGINT</td>
<td align="left">8 Bytes</td>
<td align="left">(-9,223,372,036,854,775,808，9 223 372 036 854 775 807)</td>
<td align="left">(0，18 446 744 073 709 551 615)</td>
<td align="left">极大整数值</td>
</tr>
<tr>
<td align="left">FLOAT</td>
<td align="left">4 Bytes</td>
<td align="left">(-3.402 823 466 E+38，-1.175 494 351 E-38)，0，(1.175 494 351 E-38，3.402 823 466 351 E+38)</td>
<td align="left">0，(1.175 494 351 E-38，3.402 823 466 E+38)</td>
<td align="left">单精度 浮点数值</td>
</tr>
<tr>
<td align="left">DOUBLE</td>
<td align="left">8 Bytes</td>
<td align="left">(-1.797 693 134 862 315 7 E+308，-2.225 073 858 507 201 4 E-308)，0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td>
<td align="left">0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td>
<td align="left">双精度 浮点数值</td>
</tr>
<tr>
<td align="left">DECIMAL</td>
<td align="left">对DECIMAL(M,D) ，如果M&gt;D，为M+2否则为D+2</td>
<td align="left">依赖于M和D的值</td>
<td align="left">依赖于M和D的值</td>
<td align="left">小数值</td>
</tr>
</tbody></table>
<hr>
<ul>
<li>日期和时间类型</li>
</ul>
<p>  表示时间值的日期和时间类型为DATETIME、DATE、TIMESTAMP、TIME和YEAR。</p>
<p>  每个时间类型有一个有效值范围和一个”零”值，当指定不合法的MySQL不能表示的值时使用”零”值。</p>
<p>  TIMESTAMP类型有专有的自动更新特性，将在后面描述。</p>
<table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">大小 ( bytes)</th>
<th align="left">范围</th>
<th align="left">格式</th>
<th align="left">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="left">DATE</td>
<td align="left">3</td>
<td align="left">1000-01-01&#x2F;9999-12-31</td>
<td align="left">YYYY-MM-DD</td>
<td align="left">日期值</td>
</tr>
<tr>
<td align="left">TIME</td>
<td align="left">3</td>
<td align="left">‘-838:59:59’&#x2F;‘838:59:59’</td>
<td align="left">HH:MM:SS</td>
<td align="left">时间值或持续时间</td>
</tr>
<tr>
<td align="left">YEAR</td>
<td align="left">1</td>
<td align="left">1901&#x2F;2155</td>
<td align="left">YYYY</td>
<td align="left">年份值</td>
</tr>
<tr>
<td align="left">DATETIME</td>
<td align="left">8</td>
<td align="left">‘1000-01-01 00:00:00’ 到 ‘9999-12-31 23:59:59’</td>
<td align="left">YYYY-MM-DD hh:mm:ss</td>
<td align="left">混合日期和时间值</td>
</tr>
<tr>
<td align="left">TIMESTAMP</td>
<td align="left">4</td>
<td align="left">‘1970-01-01 00:00:01’ UTC 到 ‘2038-01-19 03:14:07’ UTC结束时间是第 <strong>2147483647</strong> 秒，北京时间 <strong>2038-1-19 11:14:07</strong>，格林尼治时间 2038年1月19日 凌晨 03:14:07</td>
<td align="left">YYYY-MM-DD hh:mm:ss</td>
<td align="left">混合日期和时间值，时间戳</td>
</tr>
</tbody></table>
<hr>
<ul>
<li>字符串类型</li>
</ul>
<p>  字符串类型指CHAR、VARCHAR、BINARY、VARBINARY、BLOB、TEXT、ENUM和SET。该节描述了这些类型如何工作以及如何在查询中使用这些类型。</p>
<table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">大小</th>
<th align="left">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="left">CHAR</td>
<td align="left">0-255 bytes</td>
<td align="left">定长字符串</td>
</tr>
<tr>
<td align="left">VARCHAR</td>
<td align="left">0-65535 bytes</td>
<td align="left">变长字符串</td>
</tr>
<tr>
<td align="left">TINYBLOB</td>
<td align="left">0-255 bytes</td>
<td align="left">不超过 255 个字符的二进制字符串</td>
</tr>
<tr>
<td align="left">TINYTEXT</td>
<td align="left">0-255 bytes</td>
<td align="left">短文本字符串</td>
</tr>
<tr>
<td align="left">BLOB</td>
<td align="left">0-65 535 bytes</td>
<td align="left">二进制形式的长文本数据</td>
</tr>
<tr>
<td align="left">TEXT</td>
<td align="left">0-65 535 bytes</td>
<td align="left">长文本数据</td>
</tr>
<tr>
<td align="left">MEDIUMBLOB</td>
<td align="left">0-16 777 215 bytes</td>
<td align="left">二进制形式的中等长度文本数据</td>
</tr>
<tr>
<td align="left">MEDIUMTEXT</td>
<td align="left">0-16 777 215 bytes</td>
<td align="left">中等长度文本数据</td>
</tr>
<tr>
<td align="left">LONGBLOB</td>
<td align="left">0-4 294 967 295 bytes</td>
<td align="left">二进制形式的极大文本数据</td>
</tr>
<tr>
<td align="left">LONGTEXT</td>
<td align="left">0-4 294 967 295 bytes</td>
<td align="left">极大文本数据</td>
</tr>
</tbody></table>
</li>
</ul>
<h3 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h3><ul>
<li><p>简介：DDL全称是Data Definition Language，即数据定义语言，定义语言就是定义关系模式、删除关系、修改关系模式以及创建数据库中的各种对象，比如表、聚簇、索引、视图、函数、存储过程和触发器等等。</p>
<p>​    </p>
</li>
<li><p>DDL数据库操作：</p>
<ul>
<li><p>查询</p>
<ul>
<li><p>查询所有数据库：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> DATABASES ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询当前数据库：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATABASE();</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>创建（[]中内容表示可选参数，if not exits表示如果该数据库不存在时才创建）</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] 数据库名 [<span class="keyword">DEFAULT</span> CHARSET字符集] [<span class="keyword">COLLATE</span> 排序规则] ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DORP DATABASE[IF EXITS]数据库名 ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用，切换到某数据库</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE 数据库名;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>DDL-表操作-查询</p>
<ul>
<li><p>查询当前数据库所有表</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询表结构</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DESC</span> 表名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询指定表的建表sql语句</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>DDL -表操作-创建</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名(</span><br><span class="line">	字段<span class="number">1</span> 字段<span class="number">1</span>类型[comments 字段<span class="number">1</span>注释] ,</span><br><span class="line">    字段<span class="number">2</span> 字段<span class="number">2</span>类型[comments 字段<span class="number">2</span>注释] ,</span><br><span class="line">    ...</span><br><span class="line">    字段n 字段n类型[comments 字段n注释] #最后一个字段后没有逗号 </span><br><span class="line">)[comments 表注释]</span><br></pre></td></tr></table></figure>

<ul>
<li><p>例： </p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span>(</span><br><span class="line">	id 	   <span class="type">int</span>  	   comment <span class="string">&#x27;编号&#x27;</span> ,</span><br><span class="line">    name   <span class="type">varchar</span>(<span class="number">50</span>) comment <span class="string">&#x27;姓名&#x27;</span> ,  #<span class="keyword">SQL</span>中用<span class="type">varchar</span>表示可变字符串，后括号中限制字符串的最大长度</span><br><span class="line">    gender <span class="type">char</span>(<span class="number">1</span>)     comment <span class="string">&#x27;性别&#x27;</span>    #<span class="type">char</span>表示定长字符串，括号中指定字符串长度</span><br><span class="line">) comment <span class="string">&#x27;用户表&#x27;</span> ;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>DDL-表操作-修改</p>
<ul>
<li><p>添加字段：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> 字段名 类型(长度) [COMMENT 注释] [约束];</span><br></pre></td></tr></table></figure>

<p>  例： alter table user add age tinyint unsigned comment ‘年龄’ ;</p>
</li>
<li><p>修改数据类型：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 MODIFY 字段名 新数据类型(长度) ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改字段名和字段类型：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 CHANGE 旧字段名 新字段名 类型(长度) [COMMENT 注释] [约束];</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除字段：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> 字段名 ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改表名：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 RENAME [<span class="keyword">TO</span>] 新表名 ;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>DDL-表操作-删除</p>
<ul>
<li><p>删除表：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> [IF EXITS] 表名 ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除指定表并重新创建该表,即格式化该表，删除原表内所有数据</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> 表名 ;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h3><ul>
<li><p>介绍：DML(Data Manipulation Language)数据操作语言，用来对数据库中的数据记录进行增删改操作</p>
</li>
<li><p>添加数据（INSERT）</p>
<ul>
<li><p>给指定字段添加数据：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名(字段名<span class="number">1</span>,字段名<span class="number">2</span>,...) <span class="keyword">VALUES</span>(值<span class="number">1</span>,值<span class="number">2</span>,...);</span><br></pre></td></tr></table></figure>
</li>
<li><p>给全部字段添加数据</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名 <span class="keyword">VALUES</span>(值<span class="number">1</span>,值<span class="number">2</span>,,...);</span><br></pre></td></tr></table></figure>
</li>
<li><p>批量添加数据</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名(字段名<span class="number">1</span>,字段名<span class="number">2</span>,...) <span class="keyword">VALUES</span>(值<span class="number">1</span>,值<span class="number">2.</span>..),(值<span class="number">1</span>,值<span class="number">2.</span>..);</span><br></pre></td></tr></table></figure>

  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名 <span class="keyword">VALUES</span>(值<span class="number">1</span>,值<span class="number">2</span>,..),(值<span class="number">1</span>,值<span class="number">2</span>,..),(值<span class="number">1</span>,值<span class="number">2</span>,..);</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p>注意：</p>
<ul>
<li>插入数据时，指定的字段顺序需要和值的顺序是一一对应的</li>
<li>字符串和日期型数据应该包含在引号中</li>
<li>插入数据大小，应该在字段的规定范围内</li>
</ul>
</blockquote>
</li>
<li><p>修改数据（UPDATE）</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> 表名 <span class="keyword">SET</span> 字段名<span class="number">1</span><span class="operator">=</span>值<span class="number">1</span>,字段名<span class="number">2</span><span class="operator">=</span>值<span class="number">2</span>,...[<span class="keyword">WHERE</span> 条件];</span><br></pre></td></tr></table></figure>

<p>  注意：修改语句的条件可有可无，但没有条件时，则会修改整张表的所有数据</p>
<p>  例：update user set name&#x3D;’jack’  where id&#x3D;1 ;将id为1的行内name字段内容改为Jack</p>
<p>  ​		update user set id&#x3D;0  ：将该表内所有行内id改为0；</p>
</li>
<li><p>删除数据（DELETE）</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名 [<span class="keyword">WHERE</span> 条件];</span><br></pre></td></tr></table></figure>

<p>  注意：DELETE语句的条件可有也可以没有，若没有条件，则会删除整张表的所有数据</p>
<p>  ​			DELETE语句不能删除某一个字段的值（可以使用UPDATE).</p>
</li>
</ul>
<h3 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h3><ul>
<li><p>介绍：DQL（Data Query Language数据查询语言），数据查询语言用来查询数据库中表的记录。</p>
<p>  查询关键字：SELECT</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	字段列表</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	表名列表</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	条件列表</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	分组字段列表</span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	分组后条件列表</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	排序字段列表</span><br><span class="line">LIMIT</span><br><span class="line">	分页参数</span><br></pre></td></tr></table></figure>
</li>
<li><p>可分为基本查询，条件查询（WHERE），聚合函数（count,max,min,avg,sum)，分组查询（GROUP BY)，排序查询（ORDER BY），分页查询（LIMIT）</p>
</li>
<li><p>DQL-基本查询</p>
<ol>
<li><p>查询多个字段</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段<span class="number">1</span> ,字段<span class="number">2</span> ,字段<span class="number">3.</span>.. <span class="keyword">FROM</span> 表名;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> 表名 ; # <span class="operator">*</span>表示匹配所有字段</span><br></pre></td></tr></table></figure>

</li>
<li><p>设置别名(as 可省略，直接加别名也可起作用)</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段<span class="number">1</span> [<span class="keyword">AS</span> 别名<span class="number">1</span>] 字段<span class="number">2</span> [<span class="keyword">AS</span> 别名<span class="number">2</span>] ... <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></table></figure>

</li>
<li><p>去除重复记录</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> 字段列表 <span class="keyword">FROM</span> 表名 ;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>条件查询（WHERE）</p>
<ul>
<li><p>语法：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 FORM 表名 <span class="keyword">WHERE</span> 条件列表 ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>筛选条件分类：</p>
<table>
<thead>
<tr>
<th>筛选方式</th>
<th>运算符类型</th>
<th>运算符</th>
</tr>
</thead>
<tbody><tr>
<td>按条件表达式筛选</td>
<td>条件运算符</td>
<td>&gt; 、&lt; 、&#x3D; 、!&#x3D;（建议使用&lt;&gt; ）、&gt;&#x3D;、 &lt;&#x3D;</td>
</tr>
<tr>
<td>按照逻辑表达式筛选（一般就是用于连接多个条件表达式）</td>
<td>逻辑运算符</td>
<td>&amp;&amp; 、 ！ 、and、or</td>
</tr>
<tr>
<td>模糊查询</td>
<td>模糊查询关键字</td>
<td>like，between and，in ，is null</td>
</tr>
</tbody></table>
<ul>
<li>between and :在某个范围之内（含最大值，最小值），注意只能在between后加最小值，and后加最大值，不能反过来</li>
<li>in(…)：在in 之后的列表中的值，多选一</li>
<li>like占位符：模糊匹配（_匹配单个字符，%匹配任意个字符）</li>
</ul>
</li>
<li><p>例：select * from user where name is not null  ;查询姓名不为空的信息</p>
<p>   select * from user where name like ‘__’ ;   查询姓名为两个字符的用户信息</p>
<p>  ​		select * from user where id like  ‘%9’  ;   	查询id最后一位为9的用户信息</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<h2 id="使用-REGEXP-进行模式匹配"><a href="#使用-REGEXP-进行模式匹配" class="headerlink" title="使用 REGEXP 进行模式匹配"></a>使用 REGEXP 进行模式匹配</h2><p>REGEXP 是用于进行正则表达式匹配的运算符。</p>
<p>REGEXP 用于检查一个字符串是否匹配指定的正则表达式模式，以下是 REGEXP 运算符的基本语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT column1, column2, ...</span><br><span class="line">FROM table_name</span><br><span class="line">WHERE column_name REGEXP &#x27;pattern&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>参数说明：</strong></p>
<ul>
<li><code>column1</code>, <code>column2</code>, … 是你要选择的列的名称，如果使用 <code>*</code> 表示选择所有列。</li>
<li><code>table_name</code> 是你要从中查询数据的表的名称。</li>
<li><code>column_name</code> 是你要进行正则表达式匹配的列的名称。</li>
<li><code>&#39;pattern&#39;</code> 是一个正则表达式模式。</li>
</ul>
<p>查找 name 字段中以 <strong>‘st’</strong> 为开头的所有数据：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT name FROM person_tbl WHERE name REGEXP &#x27;^st&#x27;;</span><br></pre></td></tr></table></figure>

<p>查找 name 字段中以 <strong>‘ok’</strong> 为结尾的所有数据：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT name FROM person_tbl WHERE name REGEXP &#x27;ok$&#x27;;</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li><p>聚合函数</p>
<ul>
<li><p>介绍：将<strong>一列数据作为一个整体</strong>，进行纵向计算</p>
</li>
<li><p>常见聚合函数：</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>count</td>
<td>统计数量</td>
</tr>
<tr>
<td>max</td>
<td>最大值</td>
</tr>
<tr>
<td>min</td>
<td>最小值</td>
</tr>
<tr>
<td>avg</td>
<td>平均值</td>
</tr>
<tr>
<td>sum</td>
<td>求和</td>
</tr>
</tbody></table>
</li>
<li><p>语法：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 聚合函数(字段列表) <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>例： 统计表内用户数量： select count(*) from user;</p>
<p>  ​		统计用户平均年龄： select avg(age) from user;</p>
</li>
<li><p>注意：所有的null值不参与聚合函数运算</p>
</li>
</ul>
</li>
<li><p>分组查询</p>
<ul>
<li><p>语法：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名 [<span class="keyword">WHERE</span> 条件] <span class="keyword">GROUP</span> <span class="keyword">BY</span> 分组字段名 [<span class="keyword">HAVING</span> 分组后过滤条件] ;</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p>where 和 having 的区别：</p>
<ul>
<li>执行时机不同：where是分组之前进行过滤，不满足where条件，不参与分组；而having是分组之后对结果进行过滤</li>
<li>判断条件不同：where不能对聚合函数进行判断，而having可以</li>
</ul>
<p>执行顺序：where &gt; 聚合函数 &gt; having</p>
<p>分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义,即按什么字段分组最好就查询分组后组的该字段信息，查询其他信息只会输出该组中第一个数据，并无实际意义。</p>
</blockquote>
<ul>
<li><p>例：根据用户性别分组并统计相应数量： select gender ,  count(*)  from user group by  gender ;</p>
<p>  ​	   查询年龄小于30的用户，并根据地址分组，获取用户数量大于等于三的组内用户地址：</p>
<p>  ​	   select address , count(*) from user where age &lt; 30 group by address having count( * ) &gt;&#x3D; 3 ;</p>
</li>
</ul>
</li>
<li><p>排序查询</p>
<ul>
<li><p>语法：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名 <span class="keyword">ORDER</span> <span class="keyword">BY</span> 字段<span class="number">1</span> 排序方式<span class="number">1</span> , 字段<span class="number">2</span> 排序方式<span class="number">2</span> ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>排序方式：</p>
<ul>
<li>ASC：升序（默认值）</li>
<li>DESC：降序</li>
</ul>
</li>
<li><p>注意：若是多字段排序，当第一个字段值相同时才会根据第二个字段进行排序</p>
</li>
</ul>
</li>
<li><p>分页查询</p>
<ul>
<li><p>语法：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名 LIMIT 起始索引 ,每页查询记录数 ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>注意;</p>
<ol>
<li>起始索引从0开始，起始索引&#x3D;（查询页码 - 1）*每页显示记录数。</li>
<li>分页查询是数据库的方言，不同的数据库有不同的实现，mysql中是LIMIT</li>
<li>如果查询的是第一页数据，起始索引可以省略。直接简写为 limit 10</li>
</ol>
</li>
</ul>
</li>
<li><p>DQL语句执行顺序：</p>
</li>
</ul>
<img src="C:\Program Files (x86)\blog\source\images\java_base5\屏幕截图 2024-02-04 001501.png" alt="屏幕截图 2024-02-04 001501" style="zoom:50%;" />

<p>​					字段列表中是要展示的字段列的数据。	</p>
<h3 id="DCL"><a href="#DCL" class="headerlink" title="DCL"></a>DCL</h3><ul>
<li><p>介绍：DCL（Data Control Language数据控制语言），用来管理数据库用户，控制数据库的访问权限（哪些用户可以访问，这些用户可以访问哪些数据库）。</p>
</li>
<li><p>DCL-管理用户</p>
<ul>
<li><p>查询用户</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">USE mysql ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建用户</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;密码&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改用户密码</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span> IDENTIFIED <span class="keyword">WITH</span> mysql_native_password <span class="keyword">BY</span> <span class="string">&#x27;新密码&#x27;</span> ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除用户</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span><span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>例：创建新用户tom ： create user ‘tom‘@’localhost’ indentified by ‘123456’ ;</p>
</li>
</ul>
</li>
<li><p>DCL-权限控制</p>
<blockquote>
<p>MySQL中有多种权限，但常用的有以下几种：</p>
</blockquote>
<ul>
<li><p>查询权限(主机名处写%表示是本机)<img src="C:\Program Files (x86)\blog\source\images\java_base5\屏幕截图 2024-02-04 012420.png" alt="屏幕截图 2024-02-04 012420" style="zoom:50%;" /></p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>授予权限（若要授予所有权限，则刻在权限列表处填 all ,若要授予某数据库所有表权限，可在表名处写*）</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> 权限列表 <span class="keyword">ON</span> 数据库名.表名 <span class="keyword">TO</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>撤销权限</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> 权限列表 <span class="keyword">ON</span> 数据库名.表名 FORM <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><ul>
<li>函数是指一段可以直接被另一段程序调用的程序或代码，如sum(),count()等</li>
</ul>
<h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><ul>
<li>MySQL中常用的字符串函数</li>
</ul>
<img src="C:\Program Files (x86)\blog\source\images\java_base5\屏幕截图 2024-02-04 013935.png" alt="屏幕截图 2024-02-04 013935" style="zoom:50%;" />

<ul>
<li><p>例： select concat(‘hello’ , ‘world’);   </p>
<blockquote>
<p>select代表查询，后面接函数会将结果直接返回</p>
</blockquote>
</li>
<li><p>例：将企业员工的编号全部改为五位数，不足的在编号前补零，如一号员工编号为00001</p>
<p>  ​        update  fellow  set id &#x3D; lpad(id , 5 , 0) ;</p>
</li>
</ul>
<h3 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h3><ul>
<li>常用数值函数：</li>
</ul>
<img src="C:\Program Files (x86)\blog\source\images\java_base5\屏幕截图 2024-02-04 132849.png" alt="屏幕截图 2024-02-04 132849" style="zoom:50%;" />

<ul>
<li><p>例：根据数据库的函数生成一个六位数的随机验证码</p>
<p>  ​		select lpad(floor(rand() * 1000000) , 6 , 0 )  ;</p>
</li>
</ul>
<h3 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h3><ul>
<li>常用的日期函数：</li>
</ul>
<img src="C:\Program Files (x86)\blog\source\images\java_base5\屏幕截图 2024-02-04 134104.png" alt="屏幕截图 2024-02-04 134104" style="zoom:45%;" />

<ul>
<li><p>例：查询所有员工的入职天数，并根据入职天数进行排序</p>
<p>  ​		select name , datediff(entrydate(*) , curdate()) as workTime  from employee order by  workTime asc ;</p>
</li>
</ul>
<h3 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h3><ul>
<li>流程控制函数是很常用的一类函数，可以在SQL语句中实现条件筛选，从而提高语句的效率</li>
<li>常用流程函数：</li>
</ul>
<p>![屏幕截图 2024-02-04 135154](C:\Program Files (x86)\blog\source\images\java_base5\屏幕截图 2024-02-04 135154.png)</p>
<ul>
<li>例：查询employee表中员工姓名和工作地址，若工作地址是北京&#x2F;上海则显示为一线城市</li>
</ul>
<p>	</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">	name ,</span><br><span class="line">	<span class="keyword">case</span>  <span class="keyword">when</span> workaddress<span class="operator">=</span><span class="string">&#x27;北京&#x27;</span> <span class="operator">||</span> <span class="string">&#x27;上海&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;一线城市&#x27;</span> <span class="keyword">else</span> workaddress <span class="keyword">end</span> </span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">	employee</span><br><span class="line"></span><br></pre></td></tr></table></figure>









<h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><ul>
<li><p>概念：约束是作用域表中字段上的规则，用于限制存储在表中的数据</p>
</li>
<li><p>目的：保证数据库中数据的正确性，有效性和完整性</p>
</li>
<li><p>分类：</p>
<table>
<thead>
<tr>
<th>约束</th>
<th>描述</th>
<th>关键字</th>
</tr>
</thead>
<tbody><tr>
<td>非空约束</td>
<td>限制该字段的数据不能为null</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>唯一约束</td>
<td>保证该字段的所有数据都哦是唯一的，不重复的</td>
<td>UNIQUE</td>
</tr>
<tr>
<td>主键约束</td>
<td>主键是一行数据的唯一标识，要求非空且唯一</td>
<td>PRIMARY KEY</td>
</tr>
<tr>
<td>默认约束</td>
<td>保存数据时，如果未指定该字段的值，则采用默认值</td>
<td>DEFAULT</td>
</tr>
<tr>
<td>检查约束</td>
<td>保证字段值满足某个条件</td>
<td>CHECK</td>
</tr>
<tr>
<td>外键约束</td>
<td>用来让两张表的数据之间建立连接，保证数据的一致性和完整性</td>
<td>FOREIGN KEY</td>
</tr>
</tbody></table>
<ul>
<li>约束是作用于表中字段上的，可以在创建表&#x2F;修改表时添加约束</li>
</ul>
</li>
</ul>
<h3 id="约束演示"><a href="#约束演示" class="headerlink" title="约束演示"></a>约束演示</h3><ul>
<li><p>例：要求创建如下要求的表结构</p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段含义</th>
<th>字段类型</th>
<th>约束条件</th>
<th>约束关键字</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>ID 唯一标识</td>
<td>int</td>
<td>主键，且自动增长</td>
<td>PROMARY KEY，AUTO_INCREMENT</td>
</tr>
<tr>
<td>name</td>
<td>姓名</td>
<td>vachar(10)</td>
<td>不为空且唯一</td>
<td>NOT NULL,UNIQUE</td>
</tr>
<tr>
<td>age</td>
<td>年龄</td>
<td>int</td>
<td>大于零小于等于120</td>
<td>CHECK</td>
</tr>
<tr>
<td>status</td>
<td>状态</td>
<td>char(1)</td>
<td>若没有指定该值，默认为1</td>
<td>DEFAULT</td>
</tr>
</tbody></table>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> employee(</span><br><span class="line">	id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment comment <span class="string">&#x27;主键&#x27;</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span> comment <span class="string">&#x27;姓名&#x27;</span> ,</span><br><span class="line">    age <span class="type">int</span> <span class="keyword">check</span> (age <span class="operator">&gt;</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> age <span class="operator">&lt;=</span> <span class="number">120</span>) comment <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">    status <span class="type">char</span>(<span class="number">1</span>) <span class="keyword">default</span> <span class="string">&#x27;1&#x27;</span> comment <span class="string">&#x27;状态&#x27;</span></span><br><span class="line">) comment <span class="string">&#x27;用户表&#x27;</span> ;</span><br></pre></td></tr></table></figure>

<p>  可insert into employee (name , age , status ) values ();</p>
</li>
</ul>
<h3 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h3><ul>
<li>概念：外键用来让两张表的数据之间建立连接，从而保证数据的一致性和完整性</li>
<li>如下图，员工表中有工作部门字段 ，关联连接到另一张表部门表，这两张表此时在逻辑层面建立起联系，但在数据库层面并无联系，无法保证数据的一致性，要通过添加外键，其中具有外键的这张表称为子表，外键所关联的表叫做父表，</li>
</ul>
<img src="C:\Program Files (x86)\blog\source\images\java_base5\屏幕截图 2024-02-04 161046.png" alt="屏幕截图 2024-02-04 161046" style="zoom:50%;" />



<ul>
<li><p>语法：</p>
<ul>
<li><p>添加外键</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名(</span><br><span class="line">	字段名 数据类型,</span><br><span class="line">    ...</span><br><span class="line">    [<span class="keyword">CONSTRAINT</span>] [外键名称] <span class="keyword">FOREIGN</span> KEY (外键字段名) <span class="keyword">REFERENCES</span> 主表(主表列名) ;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> 外键名称 <span class="keyword">FOREIGN</span> KEY (外键字段名) <span class="keyword">REFERENCES</span> 主表(主表列名) ;</span><br></pre></td></tr></table></figure>

<ul>
<li>例：给上述例子中添加外键;</li>
</ul>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> emp <span class="keyword">add</span> <span class="keyword">constraint</span> 外键<span class="number">1</span> <span class="keyword">foreign</span> key (dept_id) <span class="keyword">references</span> dept(id) ;</span><br></pre></td></tr></table></figure>

</li>
<li><p>删除外键</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> FOREGIN KEY 外键名称 ;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>外键删除&#x2F;更新行为：</p>
</li>
</ul>
<img src="C:\Program Files (x86)\blog\source\images\java_base5\屏幕截图 2024-02-04 163555.png" alt="屏幕截图 2024-02-04 163555" style="zoom:50%;" />

<p>创建外键后，在删除相关数据时，若发现数据中有对应外键，则默认不能删除该信息（NO ACTION），若要删除该记录,则要在创建该外键时指定该外键相关内容的更新和删除行为：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> 外键名称 <span class="keyword">FOREIGN</span> KEY (外键字段) <span class="keyword">REFERENCES</span> 主表名 </span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">UPDATE</span> CASCADE <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE  ;</span><br></pre></td></tr></table></figure>

<p> 例：alter table emp add constraint 外键1 foregin key (dept_id) references dept(id) on update cascade on delete set null ; </p>
<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><h3 id="多表关系"><a href="#多表关系" class="headerlink" title="多表关系"></a>多表关系</h3><ul>
<li><p>介绍：在项目开发中，进行数据库结构设计时，会根据业务需求及业务模块之间的关系，分析并设计表结果，由于业务之间相互关联，所以各个表结构之间也存在着各种联系，主要分为三种：</p>
<ul>
<li><p>一对多（多对一）</p>
<ul>
<li>如上述例子中，员工与部门，一个部门对应多个员工但一个员工只能对应一个部门</li>
<li>实现：<strong>在多的一方建立外键，指向一的一方的主键</strong></li>
</ul>
</li>
<li><p>多对多</p>
<ul>
<li>如学生选课中，一个学生可以选多门课，每门课也可以被多个学生选择</li>
<li>实现：<strong>建立第三张中间表，中间表至少包含两个外键，分别关联两方主键</strong></li>
</ul>
</li>
</ul>
<p>  ![屏幕截图 2024-02-05 041131](C:\Program Files (x86)\blog\source\images\java_base5\屏幕截图 2024-02-05 041131.png)</p>
<ul>
<li>一对一<ul>
<li>一对一关系多用于单表拆分，将一张表的基础字段放在一张表中，其他详情字段放在另一张表中，以提升操作效率。</li>
<li>例如：将用户的信息详情表拆分为基本信息表，教育信息表等，根据需要搜索相应信息</li>
<li>实现：<strong>在任意一方加入外键，关联另外一方的主键，并且设置外键为唯一的（UNIQUE），保证信息的一对一关系</strong></li>
</ul>
</li>
</ul>
</li>
<li><p>例：多对多表建立;</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line">	id <span class="type">int</span> <span class="keyword">unique</span> comment <span class="string">&#x27;编号&#x27;</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">10</span>) comment <span class="string">&#x27;姓名&#x27;</span></span><br><span class="line">) comment <span class="string">&#x27;学生表&#x27;</span> ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> course(</span><br><span class="line">	id <span class="type">int</span> <span class="keyword">unique</span> ,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">15</span>) </span><br><span class="line">) comment <span class="string">&#x27;课程表&#x27;</span> ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student_courseid(</span><br><span class="line">	id <span class="type">int</span> <span class="keyword">unique</span> ,</span><br><span class="line">    studentid <span class="type">int</span> ,</span><br><span class="line">    courseid <span class="type">int</span> ,</span><br><span class="line">    <span class="keyword">constraint</span> fk_student_id <span class="keyword">references</span> student(id) ,</span><br><span class="line">    <span class="keyword">constraint</span> fk<span class="operator">-</span>course_id <span class="keyword">references</span> course(id)</span><br><span class="line">) comment <span class="string">&#x27;学生课程关系表&#x27;</span> ;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="多表查询概述"><a href="#多表查询概述" class="headerlink" title="多表查询概述"></a>多表查询概述</h3><ul>
<li><p>介绍：从多张表中查找数据</p>
<ul>
<li>select * from 表名1 ,表名2;    此时会输出表一和表二所有项的组合</li>
</ul>
</li>
<li><p>笛卡尔积：是指在数学中，两个集合A和集合B的所有组合情况。</p>
<ul>
<li><p><strong>在多表查询时，需要消除无效的笛卡尔积项</strong>，可根据外键相关的字段通过判断来进行筛选</p>
</li>
<li><p>例;</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp , dept <span class="keyword">where</span> emp.dept_id <span class="operator">=</span> dept.id ;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>多表查询分类：</p>
<ul>
<li><p>连接查询：</p>
<ul>
<li><p>内连接：相当于查询A，B交集部分数据</p>
<p>  <img src="https://img-blog.csdn.net/20171209135846780?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGxnMTc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p>
</li>
<li><p>外连接：</p>
<ol>
<li><p>左外连接：查询左表所有数据，以及两张表交集部分数据</p>
<p> <img src="https://img-blog.csdn.net/20171209142610819?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGxnMTc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p>
</li>
<li><p>右外连接：查询右表所有数据，以及两张表交集部分数据</p>
<p> <img src="https://img-blog.csdn.net/20171209144056668?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcGxnMTc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p>
</li>
</ol>
</li>
<li><p>自连接：当前表与自身的连接查询，自连接必须使用表别名</p>
</li>
</ul>
</li>
<li><p>子查询</p>
</li>
</ul>
</li>
</ul>
<p>	</p>
<h3 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h3><ul>
<li><p>内连接是查询两张表交集的部分</p>
</li>
<li><p>内连接查询语法：</p>
<ul>
<li><p>隐式内连接</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span>,,表<span class="number">2</span> <span class="keyword">WHERE</span> 条件... ;</span><br></pre></td></tr></table></figure>

</li>
<li><p>显式内连接</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span> [<span class="keyword">INNER</span>] <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 连接条件... ;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>例：查询每一个员工的姓名及关联的部门名称：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#隐式内连接</span><br><span class="line"><span class="keyword">select</span> emp.name , dept.name <span class="keyword">from</span> emp ,dept <span class="keyword">where</span> emp.demp_id <span class="operator">=</span> dept.id ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> e.name , d.name <span class="keyword">from</span> emp e , dept d <span class="keyword">where</span> e.demp.id <span class="operator">=</span> d.id ;#起别名简化表达，但起别名后原名不可再用</span><br><span class="line"></span><br><span class="line">#显式内连接</span><br><span class="line"><span class="keyword">select</span>  emp.name , dept.name <span class="keyword">from</span> emp <span class="keyword">inner</span> <span class="keyword">join</span> dept <span class="keyword">on</span> emp.demp_id <span class="operator">=</span> dept.id ;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h3><ul>
<li><p>外连接查询语法：</p>
<ul>
<li><p>左外连接：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span> <span class="keyword">LEFT</span> [<span class="keyword">OUTER</span>] <span class="keyword">join</span> 表<span class="number">2</span> <span class="keyword">ON</span> 条件... ;</span><br></pre></td></tr></table></figure>

<p>  相当于查询表1（左表）所有数据包含表1和表2交集部分的数据,</p>
<p>  例如在员工和部门的例子中，若有一位员工目前部门为null，则若使用内连接就不会显示他的信息，此时则需要使用左外连接来查询所有的员工的信息。</p>
</li>
<li><p>右外连接：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span> <span class="keyword">RIGHT</span> [<span class="keyword">OUTER</span>] <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 条件... ;</span><br></pre></td></tr></table></figure>

<p>  相当于查询表2（右表）所有数据包含表1和表2交集部分的数据</p>
</li>
</ul>
</li>
</ul>
<h3 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h3><ul>
<li><p>自连接查询：一张表自己连接自己进行查询,自连接中必须要给表起别名</p>
</li>
<li><p>自连接查询语法：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表A 别名A <span class="keyword">JOIN</span> 表A 别名B <span class="keyword">ON</span> 条件 ...;</span><br></pre></td></tr></table></figure>


</li>
<li><p>自连接查询，可以是内连接查询也可以是外连接查询。</p>
</li>
<li><p>例：假设每个员工后都有其上司的id信息，查询所有员工emp及其领导的名字，如果员工没有领导也需要查询出来</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.name <span class="string">&#x27;员工&#x27;</span>,b.name <span class="string">&#x27;领导&#x27;</span> <span class="keyword">from</span> emp a <span class="keyword">left</span> <span class="keyword">join</span> emp b <span class="keyword">on</span> a.mangerId <span class="operator">=</span> b.id ;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h3><ul>
<li><p>UNION ， UNION ALL</p>
</li>
<li><p>对于union查询，就是把多次查询的结果合并起来，形成一个新的查询结果集</p>
</li>
<li><p>语法：（要求，多次查询的字段列表要完全相同）</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表A ...</span><br><span class="line">UNIOM [<span class="keyword">ALL</span>]</span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表B... ;</span><br></pre></td></tr></table></figure>

</li>
<li><p>例：查询薪资低于5000且年龄大于 50岁的员工</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> salary <span class="operator">&lt;</span> <span class="number">5000</span></span><br><span class="line"><span class="keyword">union</span> <span class="keyword">all</span> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> age <span class="operator">&gt;</span> <span class="number">50</span> ;</span><br></pre></td></tr></table></figure>

<ul>
<li>注：union all 只是简单的将多次查询结果拼接在一起，而union会去掉其中重复的部分</li>
</ul>
</li>
</ul>
<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><ul>
<li><p>概念：在SQL语句中嵌套SELECT语句，称为嵌套查询，又称子查询</p>
</li>
<li><p>语法：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> 表名 <span class="keyword">WHERE</span> columnl <span class="operator">=</span> (<span class="keyword">SELECT</span> columnl <span class="keyword">from</span> 表名<span class="number">2</span> ) ;</span><br></pre></td></tr></table></figure>

<p>  子查询外部的语句可以是INSERT&#x2F;UPDATE&#x2F;DELETE&#x2F;SELECT 的任何一个</p>
</li>
<li><p>根据子查询的结果不同，分为：</p>
<ul>
<li>标量子查询：子查询结果为单个值</li>
<li>列子查询：子查询结果为一列</li>
<li>行子查询：子查询结果为一行</li>
<li>表子查询：子查询结果为一张表</li>
</ul>
</li>
<li><p>根据子查询位置分为：WHERE之后，FROM之前，SELECT之后</p>
</li>
<li><p>标量子查询：子查询返回的结果是单个值（数字，字符串，日期等），最简单的形式，这种自查徐晓楠称为标量子查询</p>
<p>  常用的操作符：&#x3D;   &lt;&gt;  &gt;   &gt;&#x3D;   &lt;  &lt;&#x3D;</p>
<ul>
<li><p>例：查询销售部员工信息：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> dept_id <span class="operator">=</span> (<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;销售部&#x27;</span>) ;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>列子查询：子查询返回的结果是一列（可以是多行），这种查询称为列子查询</p>
<p>  常用操作符：IN ，NOT IN ，ANY ，SOME ， ALL</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>IN</td>
<td>在指定的集合范围之内，多选一</td>
</tr>
<tr>
<td>NOT IN</td>
<td>不在指定的集合范围之内</td>
</tr>
<tr>
<td>ANY</td>
<td>子查询返回列表中，有任意一个满足即可</td>
</tr>
<tr>
<td>SOME</td>
<td>与ANY等同，使用SOME的地方都可以使用ANY</td>
</tr>
<tr>
<td>ALL</td>
<td>子查询返回列表的所有值都必须满足</td>
</tr>
</tbody></table>
<ul>
<li><p>例：查询销售部和市场部所有员工信息(内部SQL语句查询出的结果是一列数据)</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> dept_id <span class="keyword">in</span> (<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="keyword">in</span> (<span class="string">&#x27;销售部&#x27;</span> , <span class="string">&#x27;市场部&#x27;</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p>例：查询比销售部所有人工资都高的人的信息</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> salary <span class="operator">&gt;</span> <span class="keyword">all</span> (<span class="keyword">select</span> salary <span class="keyword">from</span> emp <span class="keyword">where</span> dept_id <span class="operator">=</span> (<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;财务部&#x27;</span>));</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>行子查询：子查询返回的结果是一行（可以是多列），这种查询称为行子查询</p>
<ul>
<li><p>例：查询与小王薪资以及直属领导均相同的员工信息</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> (salary,managerId) <span class="operator">=</span> (<span class="keyword">select</span> salary,mangerId <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;小王&#x27;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>表子查询：子查询返回的结果是多行多列，这种子查询称为表子查询</p>
<p>  常用操作符：IN</p>
<ul>
<li><p>例：查询与小王和小李的职位和薪资相同的员工信息</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> (job,salary) <span class="keyword">in</span> (<span class="keyword">select</span> joob,salary <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="keyword">in</span> (<span class="string">&#x27;小王&#x27;</span>，<span class="string">&#x27;小李&#x27;</span>));</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="多表查询练习（undo）"><a href="#多表查询练习（undo）" class="headerlink" title="多表查询练习（undo）"></a>多表查询练习（undo）</h3><h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><ul>
<li><p>简介：事务是一组操作的集合，它是一个不可分割的工作单位，事务会把所有的操作作为一个整体一起向系统提交或撤销操作的请求，即<u>这些操作要么同时成功要么同时失败</u>。</p>
<ul>
<li>例如银行的转账事务中，要先查询A的账户是否有足够的余额，若有，则将A的账户余额减去转账值，并将B的账户余额加上该值，才算是完成一个事务，若要回滚取消事务，则整个事务中的操作都会取消，保证数据的一致性。</li>
</ul>
</li>
<li><p>默认的MySQL的事务是自动提交的，也就是说，当执行一条DML语句，MySQL会立即隐式的提交事务，每条SQL语句是一个单独的事务，每条语句执行后的结果会直接提交到数据库中。</p>
</li>
<li><p>作用：事务处理可以用来维护数据库的完整性，保证成批的 SQL 语句要么全部执行，要么全部不执行。</p>
</li>
</ul>
<h3 id="事务操作"><a href="#事务操作" class="headerlink" title="事务操作"></a>事务操作</h3><ul>
<li><p>查看&#x2F;设置事务提交方式：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@autocommit</span>; #发现输出结果为<span class="number">1</span>，即每条语句会单独作为一个事务提交</span><br><span class="line"><span class="keyword">SET</span> @<span class="variable">@autocommit</span> <span class="operator">=</span> <span class="number">0</span> ;#设置为手动提交，且只针对当前窗口有效</span><br></pre></td></tr></table></figure>
</li>
<li><p>提交事务：（修改autocommit后每次执行SQL语句只是修改临时表中数据，并没有提交到数据库中,要提交数据要commit）</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COMMIT</span>; #执行</span><br></pre></td></tr></table></figure>
</li>
<li><p>回滚事务：若整个事务执行时发生错误，则只影响当前表中的数据，并未影响数据库，此时要将临时表中的修改的数据回滚到初始状态重新操作。（比如整个事务的前几句SQL语句成功执行，后面却有错误，则前几条执行成功语句对临时表也产生了影响）而回滚会结束用户的事务，并<strong>撤销正在进行的所有未提交的修改</strong>；</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>开启事务:(将该语句放在待执行事务语句前一同执行，则表示要手动提交该事务，不需要设置autocommit)</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> TRANSACTION 或 <span class="keyword">BEGIN</span> ;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="事务的四大特性："><a href="#事务的四大特性：" class="headerlink" title="事务的四大特性："></a>事务的四大特性：</h3><ul>
<li>原子性：事务i不可分割的最小操作单元，要么全部成功要么全部失败</li>
<li>一致性：事务完成时，必须使所有的数据都保持一致状态。</li>
<li>隔离性：数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行</li>
<li>持久性：事务一旦提交，他对数据库中的数据改变就是永久的。</li>
</ul>
<h3 id="并发事务问题"><a href="#并发事务问题" class="headerlink" title="并发事务问题"></a>并发事务问题</h3><p>多个用户同时对同一数据库数据进行操作</p>
<ul>
<li>脏读：一个事务读到另一个事务还没有提交的数据</li>
<li>不可重复读：一个事务先后读取同一条记录，但两次读取的数据不同，称之为不可重复读。</li>
<li>幻读：一个事务按照条件查询数据时，并没有对应的数据行，但在插入数据时，又发现这行数据已经存在，好像出现了幻影</li>
</ul>
<h3 id="事务隔离级别"><a href="#事务隔离级别" class="headerlink" title="事务隔离级别"></a>事务隔离级别</h3><ul>
<li>事务隔离级别及可出现的并发事务问题</li>
</ul>
<table>
<thead>
<tr>
<th>隔离级别</th>
<th>脏读</th>
<th>不可重复读</th>
<th>幻读</th>
</tr>
</thead>
<tbody><tr>
<td>Read uncommitted</td>
<td>:white_check_mark:</td>
<td>:white_check_mark:</td>
<td>:white_check_mark:</td>
</tr>
<tr>
<td>Read committed</td>
<td>X</td>
<td>:white_check_mark:</td>
<td>:white_check_mark:</td>
</tr>
<tr>
<td>repeatable read(默认)</td>
<td>X</td>
<td>X</td>
<td>:white_check_mark:</td>
</tr>
<tr>
<td>serilizable</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
</tbody></table>
<ul>
<li><p>查看事务隔离级别：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@TRANSACTION_ISOLATION</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置事务隔离级别：(session表示仅对当前会话窗口有效，global表示对所有会话窗口有效)</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> [SESSION<span class="operator">|</span><span class="keyword">GLOBAL</span>] TRANSACTION ISOLATION LEVEL &#123;READ UNCOMMITTED <span class="operator">|</span> READ COMMITTED <span class="operator">|</span></span><br><span class="line">REPEATABLE READ <span class="operator">|</span> SERIALIZABLE&#125; ;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><h3 id="索引简介"><a href="#索引简介" class="headerlink" title="索引简介"></a>索引简介</h3><ul>
<li><p>介绍：索引（index）是帮助MySQL高效获取数据的数据结构（有序）。在数据之外，数据库系统还维护着满足特定查找算法的数据结构，这些数据结构以某种方式引用（指向）数据，这样就可以在这些数据结构上实现高级查找算法，这种数据结构就是索引。</p>
</li>
<li><p>例如：执行SELECT语句，无索引时会进行全表扫描，性能很低。有索引时，如使用有序二叉树来存放数据，查找性能会提高很多。（只是举例，实际并不会用二叉树做索引，当二叉树不平衡时查询性能极低。而红黑树在大数据量时，层级较深，检索速度慢）</p>
</li>
<li><p>优点：</p>
<ul>
<li>提高数据检查的效率，降低数据库的IO成本；</li>
<li>通过索引列对数据进行排序，降低数据排序的成本，降低CPU的消耗</li>
</ul>
</li>
<li><p>缺点：</p>
<ul>
<li>索引列占用空间</li>
<li>索引提高了查询效率，同时也降低更新表的速度，如对表进行INSERT，UPDATE等时，效率降低</li>
</ul>
</li>
</ul>
<h3 id="索引结构"><a href="#索引结构" class="headerlink" title="索引结构"></a>索引结构</h3><ul>
<li><p>MySQL的索引是在存储引擎层实现的，不同的存储引擎有不同的结果：</p>
<table>
<thead>
<tr>
<th>索引结构</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong>B+Tree索引</strong></td>
<td>最常见的索引类型，大部分引擎都支持B+树索引</td>
</tr>
<tr>
<td>Hash索引</td>
<td>底层数据结构时用哈希表实现的，只有精确匹配索引列的查询才有效，不支持范围查询</td>
</tr>
<tr>
<td>R-Tree（空间索引）</td>
<td>空间索引是MyLSAM引擎的一个特殊索引类型，主要用于地理空间数据类型，通常使用较少</td>
</tr>
<tr>
<td>Full-text（全文索引）</td>
<td>是一种通过建立倒排序索引，快速匹配文档的方式，类似Lucene,Solr,ES.</td>
</tr>
</tbody></table>
<p>  主要是B+ 树索引</p>
</li>
<li><p>B-Tree 多路平衡查找树</p>
</li>
</ul>
<p>![屏幕截图 2024-02-28 190700](C:\Program Files (x86)\blog\source\images\java_base5\屏幕截图 2024-02-28 190700.png)</p>
<p>B树创建：中间元素向上分裂</p>
<p>可视化网站：<a target="_blank" rel="noopener" href="https://www.cs.usfca.edu/~galles/visualization/BTree.html">https://www.cs.usfca.edu/~galles/visualization/BTree.html</a></p>
<ul>
<li>B +Tree<ul>
<li>特点：<ol>
<li>所有的元素都出现在叶子节点，非叶子结点只是起到索引数据的作用；</li>
<li>所有的叶子节点构成一个单向链表</li>
</ol>
</li>
</ul>
</li>
</ul>
<p>![屏幕截图 2024-02-28 191536](C:\Program Files (x86)\blog\source\images\java_base5\屏幕截图 2024-02-28 191536.png)</p>
<ul>
<li>MySQL索引数据结构对经典的B+ 树进行了优化。在原B+Tree的基础上，增加了一个指向相邻叶子结点的链表指针，就形成了带有顺序指针的B+Tree，提高区间访问的性能。每一个节点都存放在数据块中，也叫页。</li>
</ul>
<p>![屏幕截图 2024-02-28 193135](C:\Program Files (x86)\blog\source\images\java_base5\屏幕截图 2024-02-28 193135.png)</p>
<ul>
<li><p>Hash索引</p>
<p>  哈希索引就是采用一定的哈希算法，将键值换算成新的hash值，映射到对应的槽位上，然后存储在hash表中，</p>
<p>  如果多个键值映射到一个相同的槽位上，他们就产生了hash冲突，可以通过将他们连接在一个链表解决</p>
<ul>
<li>hash索引特点<ol>
<li>哈希索引只能用于对等比较（in,&#x3D;)，不支持范围查询（between,&gt;,&lt;)</li>
<li>无法利用索引完成排序操作</li>
<li>查找效率高，通常只需要一次检索就可以了，效率通常要高于B+Tree索引</li>
</ol>
</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>为什么InnoDB存储引擎选择使用B+Tree索引结构？</strong></p>
<ol>
<li>相对于二叉树，红黑树，层级更少，搜索效率高</li>
<li>对于BTree，无论是叶子结点还是还是非叶子节点都会保存数据，这样导致一页中存储的键值减少，指针跟着减少，要同样保存大量数据，只能增加数的高度，导致性能降低。</li>
<li>采用B+ 树，查询每个数据都要到叶子结点中查找，搜索效率稳定，且在B+树结果中叶子节点形成一个双向链表，便于范围查找和排序。</li>
<li>哈希索引只支持等值匹配，并不支持范围匹配和排序操作。</li>
</ol>
</blockquote>
<h3 id="索引分类"><a href="#索引分类" class="headerlink" title="索引分类"></a>索引分类</h3><ul>
<li><p>索引主要分为以下：</p>
<table>
<thead>
<tr>
<th>分类</th>
<th>含义</th>
<th>特点</th>
<th>关键字</th>
</tr>
</thead>
<tbody><tr>
<td>主键索引</td>
<td>针对于表中主键创建的索引</td>
<td>默认自动创建，只能有一个</td>
<td>PRIMARY</td>
</tr>
<tr>
<td>唯一索引</td>
<td>避免同一表中某数据列中的值重复</td>
<td>可以有多个</td>
<td>UNIQUE</td>
</tr>
<tr>
<td>常规索引</td>
<td>快速定位特定数据</td>
<td>可以有多个</td>
<td></td>
</tr>
<tr>
<td>全文索引</td>
<td>全文索引查找的是文本的关键词，而不是比较索引中的值</td>
<td>可以有多个</td>
<td>FULLTEXT</td>
</tr>
</tbody></table>
</li>
<li><p>在InnoDB 存储引擎中，根据索引的存储形式，又可以分为以下两种：</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>分类</th>
<th>含义</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td>聚集索引</td>
<td>将数据存储与索引放到了一块，索引结果的叶子结点保存了行数据</td>
<td>必须有且只有一个</td>
</tr>
<tr>
<td>二级索引</td>
<td>将数据与索引分开存储，索引结构的叶子结点关联的是对应的主键id</td>
<td>可以存在多个</td>
</tr>
</tbody></table>
<p>聚集索引选取规则：</p>
<ul>
<li>如果存在主键，主键索引就是聚集索引</li>
<li>若不存在主键，将使用第一个唯一索引作为聚集索引</li>
<li>若表没有主键，或没有合适的唯一索引，则InnoDB会自动生成一个rowid作为隐藏的聚集索引</li>
</ul>
<p>![屏幕截图 2024-02-28 203019](C:\Users\Lenovo\Pictures\Screenshots\屏幕截图 2024-02-28 203019.png)</p>
<ul>
<li>查询时若执行select * from user where name &#x3D; ‘Arm’,则会先在以name的二级索引中查找Arm的id，在用获得的id冲主键索引中查找全部信息，这称为回表查询。(故按id查询比按name查询效率高)</li>
</ul>
<p>![屏幕截图 2024-02-28 203952](C:\Program Files (x86)\blog\source\images\java_base5\屏幕截图 2024-02-28 203952.png)</p>
<blockquote>
<p>B+Tree高度</p>
<p>![屏幕截图 2024-02-28 205514](C:\Program Files (x86)\blog\source\images\java_base5\屏幕截图 2024-02-28 205514.png)</p>
</blockquote>
<h3 id="索引语法"><a href="#索引语法" class="headerlink" title="索引语法"></a>索引语法</h3><ul>
<li><p>创建索引</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">UNIQUE</span><span class="operator">|</span>FULLTEXT] INDEX 索引名 <span class="keyword">ON</span> 表名 (字段名,...);</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看索引</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> 表名 ;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建索引</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> INDEX 索引名 <span class="keyword">ON</span> 表名 ;</span><br></pre></td></tr></table></figure>

</li>
<li><p>例： </p>
<ul>
<li><p>phone手机号字段值非空且唯一，为该字段创建唯一索引</p>
<p>  create unique index idx_user_phone on user(phone);</p>
</li>
<li><p>为 profession,age,status创建联合索引</p>
<p>  create index idx_user_pro_age_sta on user(profession,age,status);</p>
</li>
</ul>
<blockquote>
<p>注意联合索引中，字段的顺序是很重要的</p>
</blockquote>
</li>
</ul>
<h3 id="SQL性能分析"><a href="#SQL性能分析" class="headerlink" title="SQL性能分析"></a>SQL性能分析</h3><ul>
<li><p>SQL执行频率</p>
<p>  MySQL 客户端连接成功后，通过show [seession l global] status 命令可以提供服务器状态信息。通过如下指令，可以查看当前数据库的INSERT，UPDATE的访问频次</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GLOBAL</span> STATUS <span class="keyword">LIKE</span> <span class="string">&#x27;Com_______&#x27;</span>;#七个<span class="string">&#x27;_&#x27;</span></span><br></pre></td></tr></table></figure>

<p>  (global表示查询全局信息，seession 表示当前窗口信息)</p>
</li>
<li><p>慢查询日志</p>
<p>  慢查询日志记录了所有执行时间超过指定参数（long_query_time,单位：秒，默认10秒）的所有SQL语句的日志。MySQL的慢查询日志默认没有开启，需要在MySQL的配置文件（&#x2F;etc&#x2F;my.cnf）中配置</p>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://pengzhanyi.github.io">zhanyi peng</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://pengzhanyi.github.io/2024/03/05/mysql/">https://pengzhanyi.github.io/2024/03/05/mysql/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://pengzhanyi.github.io" target="_blank">Blog | kaori</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/img/head_sculpture.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/04/29/springboot/" title="springboot"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">springboot</div></div></a></div><div class="next-post pull-right"><a href="/2024/01/27/pa/" title=""><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info"></div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/head_sculpture.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zhanyi peng</div><div class="author-info__description">"人生就是在欲望不满的痛苦和欲望满足后的厌倦之间，像钟摆一样地来回摆动"</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">17</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.</span> <span class="toc-text">数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A5%E9%97%A8"><span class="toc-number">1.1.</span> <span class="toc-text">入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE"><span class="toc-number">1.1.1.</span> <span class="toc-text">安装和配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.2.</span> <span class="toc-text">基本介绍</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL"><span class="toc-number">1.2.</span> <span class="toc-text">SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95"><span class="toc-number">1.2.1.</span> <span class="toc-text">SQL通用语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DDL"><span class="toc-number">1.2.2.</span> <span class="toc-text">DDL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DML"><span class="toc-number">1.2.3.</span> <span class="toc-text">DML</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DQL"><span class="toc-number">1.2.4.</span> <span class="toc-text">DQL</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-REGEXP-%E8%BF%9B%E8%A1%8C%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D"><span class="toc-number">1.3.</span> <span class="toc-text">使用 REGEXP 进行模式匹配</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DCL"><span class="toc-number">1.3.1.</span> <span class="toc-text">DCL</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">1.4.</span> <span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-number">1.4.1.</span> <span class="toc-text">字符串函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E5%87%BD%E6%95%B0"><span class="toc-number">1.4.2.</span> <span class="toc-text">数值函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">1.4.3.</span> <span class="toc-text">日期函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="toc-number">1.4.4.</span> <span class="toc-text">流程控制函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.5.</span> <span class="toc-text">约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%E6%BC%94%E7%A4%BA"><span class="toc-number">1.5.1.</span> <span class="toc-text">约束演示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.5.2.</span> <span class="toc-text">外键约束</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.6.</span> <span class="toc-text">多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E5%85%B3%E7%B3%BB"><span class="toc-number">1.6.1.</span> <span class="toc-text">多表关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E6%A6%82%E8%BF%B0"><span class="toc-number">1.6.2.</span> <span class="toc-text">多表查询概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.6.3.</span> <span class="toc-text">内连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.6.4.</span> <span class="toc-text">外连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.6.5.</span> <span class="toc-text">自连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.6.6.</span> <span class="toc-text">联合查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.6.7.</span> <span class="toc-text">子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E7%BB%83%E4%B9%A0%EF%BC%88undo%EF%BC%89"><span class="toc-number">1.6.8.</span> <span class="toc-text">多表查询练习（undo）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.7.</span> <span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C"><span class="toc-number">1.7.1.</span> <span class="toc-text">事务操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7%EF%BC%9A"><span class="toc-number">1.7.2.</span> <span class="toc-text">事务的四大特性：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98"><span class="toc-number">1.7.3.</span> <span class="toc-text">并发事务问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-number">1.7.4.</span> <span class="toc-text">事务隔离级别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">1.8.</span> <span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%AE%80%E4%BB%8B"><span class="toc-number">1.8.1.</span> <span class="toc-text">索引简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84"><span class="toc-number">1.8.2.</span> <span class="toc-text">索引结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E5%88%86%E7%B1%BB"><span class="toc-number">1.8.3.</span> <span class="toc-text">索引分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E8%AF%AD%E6%B3%95"><span class="toc-number">1.8.4.</span> <span class="toc-text">索引语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90"><span class="toc-number">1.8.5.</span> <span class="toc-text">SQL性能分析</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/30/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96/" title="苍穹外卖">苍穹外卖</a><time datetime="2024-07-30T01:15:42.000Z" title="发表于 2024-07-30 09:15:42">2024-07-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/04/29/springboot/" title="springboot">springboot</a><time datetime="2024-04-29T05:56:49.000Z" title="发表于 2024-04-29 13:56:49">2024-04-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/05/mysql/" title="mysql">mysql</a><time datetime="2024-03-04T17:11:07.000Z" title="发表于 2024-03-05 01:11:07">2024-03-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/01/27/pa/" title="无题">无题</a><time datetime="2024-01-26T16:51:04.982Z" title="发表于 2024-01-27 00:51:04">2024-01-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/01/18/linux/" title="Linux">Linux</a><time datetime="2024-01-18T08:07:15.000Z" title="发表于 2024-01-18 16:07:15">2024-01-18</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By zhanyi peng</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>